import React, { useEffect, useState } from 'react';

interface CursorProps {
  isPanning?: boolean;
  isVisible?: boolean;
}

const Cursor: React.FC<CursorProps> = ({ isPanning = false, isVisible = true }) => {
  const [position, setPosition] = useState({ x: 0, y: 0 });

  useEffect(() => {
    const updateCursorPosition = (e: MouseEvent) => {
      setPosition({ x: e.clientX, y: e.clientY });
    };

    if (isVisible) {
      document.addEventListener('mousemove', updateCursorPosition);
      // Hide default cursor
      document.body.style.cursor = 'none';
    } else {
      // Show default cursor
      document.body.style.cursor = 'auto';
    }

    return () => {
      document.removeEventListener('mousemove', updateCursorPosition);
      document.body.style.cursor = 'auto';
    };
  }, [isVisible]);

  if (!isVisible) return null;

  return (
    <div
      className="pointer-events-none fixed z-[9999] transition-transform"
      style={{
        left: position.x - 10, // Offset based on the cursor's hotspot
        top: position.y - 5,   // Offset based on the cursor's hotspot
        transform: isPanning ? 'scale(1.1)' : 'scale(1)',
      }}
    >
      <svg
        width="50"
        height="25"
        viewBox="0 0 100 50"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className={`transition-all duration-150 ${isPanning ? 'opacity-80' : 'opacity-100'}`}
      >
        <g filter="url(#filter0_d_72_88)">
          <path d="M9.70481 20.4325L3.54745 4.42338C3.33259 3.86472 3.87251 3.31157 4.4362 3.51287L21.153 9.48239C21.8191 9.72026 21.7524 10.6833 21.0598 10.827L13.4303 12.4107C13.1672 12.4653 12.9586 12.6657 12.8934 12.9263L11.0373 20.351C10.8714 21.0145 9.95031 21.0708 9.70481 20.4325Z" fill="#667799"/>
          <path d="M9.70481 20.4325L3.54745 4.42338C3.33259 3.86472 3.87251 3.31157 4.4362 3.51287L21.153 9.48239C21.8191 9.72026 21.7524 10.6833 21.0598 10.827L13.4303 12.4107C13.1672 12.4653 12.9586 12.6657 12.8934 12.9263L11.0373 20.351C10.8714 21.0145 9.95031 21.0708 9.70481 20.4325Z" stroke="#667799" strokeWidth="2"/>
          <path d="M9.70481 20.4325L3.54745 4.42338C3.33259 3.86472 3.87251 3.31157 4.4362 3.51287L21.153 9.48239C21.8191 9.72026 21.7524 10.6833 21.0598 10.827L13.4303 12.4107C13.1672 12.4653 12.9586 12.6657 12.8934 12.9263L11.0373 20.351C10.8714 21.0145 9.95031 21.0708 9.70481 20.4325Z" stroke="white" strokeWidth="2"/>
        </g>
        <g filter="url(#filter1_d_72_88)">
          <rect x="19" y="20" width="77" height="22" rx="2" fill="#667799" shapeRendering="crispEdges"/>
          <path d="M25.532 35V27.236L25.64 26.6H26.684V35H25.532ZM23.672 28.892V27.824C23.848 27.832 24.052 27.776 24.284 27.656C24.524 27.536 24.764 27.38 25.004 27.188C25.244 26.996 25.456 26.796 25.64 26.588L26.372 27.38C26.1 27.668 25.816 27.928 25.52 28.16C25.224 28.392 24.92 28.576 24.608 28.712C24.304 28.848 23.992 28.908 23.672 28.892ZM31.8442 35.144C31.1962 35.144 30.6202 34.96 30.1162 34.592C29.6122 34.216 29.2162 33.704 28.9282 33.056C28.6482 32.4 28.5082 31.648 28.5082 30.8C28.5082 29.952 28.6482 29.204 28.9282 28.556C29.2162 27.9 29.6082 27.388 30.1042 27.02C30.6082 26.644 31.1882 26.456 31.8442 26.456C32.5002 26.456 33.0762 26.644 33.5722 27.02C34.0762 27.388 34.4722 27.9 34.7602 28.556C35.0482 29.204 35.1922 29.952 35.1922 30.8C35.1922 31.648 35.0482 32.4 34.7602 33.056C34.4802 33.704 34.0882 34.216 33.5842 34.592C33.0802 34.96 32.5002 35.144 31.8442 35.144ZM31.8442 34.064C32.2682 34.064 32.6442 33.924 32.9722 33.644C33.3082 33.364 33.5682 32.98 33.7522 32.492C33.9362 32.004 34.0282 31.44 34.0282 30.8C34.0282 30.16 33.9362 29.596 33.7522 29.108C33.5682 28.612 33.3082 28.224 32.9722 27.944C32.6442 27.664 32.2682 27.524 31.8442 27.524C31.4202 27.524 31.0442 27.664 30.7162 27.944C30.3882 28.224 30.1322 28.612 29.9482 29.108C29.7642 29.596 29.6722 30.16 29.6722 30.8C29.6722 31.44 29.7642 32.008 29.9482 32.504C30.1322 32.992 30.3882 33.376 30.7162 33.656C31.0442 33.928 31.4202 34.064 31.8442 34.064ZM35.8231 35L38.2831 31.556L39.9991 29H41.3431L39.0271 32.276L37.1911 35H35.8231ZM40.1311 35L38.3191 32.276L35.9791 29H37.3231L39.0511 31.556L41.4871 35H40.1311ZM47.9831 35.144C47.3991 35.144 46.8831 35.012 46.4351 34.748C45.9871 34.476 45.6351 34.104 45.3791 33.632C45.1231 33.16 44.9951 32.616 44.9951 32C44.9951 31.384 45.1231 30.84 45.3791 30.368C45.6351 29.896 45.9871 29.528 46.4351 29.264C46.8911 28.992 47.4111 28.856 47.9951 28.856C48.5471 28.856 49.0311 28.996 49.4471 29.276C49.8631 29.548 50.1871 29.94 50.4191 30.452C50.6591 30.956 50.7791 31.552 50.7791 32.24H45.9311L46.1471 32.06C46.1471 32.484 46.2311 32.852 46.3991 33.164C46.5671 33.476 46.7951 33.716 47.0831 33.884C47.3711 34.044 47.6991 34.124 48.0671 34.124C48.4671 34.124 48.7991 34.032 49.0631 33.848C49.3351 33.656 49.5471 33.416 49.6991 33.128L50.6831 33.584C50.5231 33.896 50.3151 34.172 50.0591 34.412C49.8031 34.644 49.4991 34.824 49.1471 34.952C48.8031 35.08 48.4151 35.144 47.9831 35.144ZM46.2191 31.52L45.9911 31.31H49.7831L49.5671 31.52C49.5671 31.168 49.4951 30.868 49.3511 30.62C49.2071 30.364 49.0151 30.172 48.7751 30.044C48.5351 29.908 48.2671 29.84 47.9711 29.84C47.6831 29.84 47.4031 29.908 47.1311 30.044C46.8671 30.172 46.6471 30.36 46.4711 30.608C46.3031 30.856 46.2191 31.16 46.2191 31.52ZM51.9053 35V29H52.9733L53.0453 30.104V35H51.9053ZM56.0573 35V31.928H57.1973V35H56.0573ZM56.0573 31.928C56.0573 31.384 55.9933 30.972 55.8653 30.692C55.7453 30.404 55.5733 30.204 55.3493 30.092C55.1333 29.98 54.8813 29.92 54.5933 29.912C54.1053 29.912 53.7253 30.084 53.4533 30.428C53.1813 30.772 53.0453 31.256 53.0453 31.88H52.5533C52.5533 31.248 52.6453 30.708 52.8293 30.26C53.0213 29.804 53.2893 29.456 53.6333 29.216C53.9853 28.976 54.4013 28.856 54.8813 28.856C55.3533 28.856 55.7613 28.952 56.1053 29.144C56.4573 29.336 56.7253 29.636 56.9093 30.044C57.1013 30.444 57.1973 30.972 57.1973 31.628V31.928H56.0573ZM61.1158 37.556C60.7158 37.556 60.3518 37.516 60.0238 37.436C59.6958 37.364 59.4198 37.28 59.1958 37.184C58.9718 37.088 58.8038 37.004 58.6918 36.932L59.1238 36.008C59.2278 36.072 59.3758 36.144 59.5678 36.224C59.7598 36.312 59.9838 36.384 60.2398 36.44C60.4958 36.504 60.7798 36.536 61.0918 36.536C61.4598 36.536 61.7878 36.46 62.0758 36.308C62.3638 36.164 62.5878 35.936 62.7478 35.624C62.9158 35.312 62.9998 34.912 62.9998 34.424V29H64.1398V34.4C64.1398 35.088 64.0078 35.664 63.7438 36.128C63.4878 36.6 63.1318 36.956 62.6758 37.196C62.2278 37.436 61.7078 37.556 61.1158 37.556ZM61.0078 34.916C60.4638 34.916 59.9878 34.792 59.5798 34.544C59.1798 34.288 58.8638 33.936 58.6318 33.488C58.4078 33.032 58.2958 32.508 58.2958 31.916C58.2958 31.3 58.4078 30.764 58.6318 30.308C58.8638 29.852 59.1798 29.496 59.5798 29.24C59.9878 28.984 60.4638 28.856 61.0078 28.856C61.5038 28.856 61.9358 28.984 62.3038 29.24C62.6798 29.496 62.9678 29.856 63.1678 30.32C63.3758 30.776 63.4798 31.312 63.4798 31.928C63.4798 32.52 63.3758 33.044 63.1678 33.5C62.9678 33.948 62.6798 34.296 62.3038 34.544C61.9358 34.792 61.5038 34.916 61.0078 34.916ZM61.2958 33.956C61.6318 33.956 61.9238 33.868 62.1718 33.692C62.4198 33.508 62.6158 33.264 62.7598 32.96C62.9038 32.648 62.9758 32.292 62.9758 31.892C62.9758 31.492 62.9038 31.14 62.7598 30.836C62.6158 30.532 62.4158 30.296 62.1598 30.128C61.9118 29.952 61.6198 29.864 61.2838 29.864C60.9318 29.864 60.6198 29.952 60.3478 30.128C60.0838 30.296 59.8758 30.532 59.7238 30.836C59.5718 31.14 59.4958 31.492 59.4958 31.892C59.4958 32.292 59.5718 32.648 59.7238 32.96C59.8838 33.264 60.0958 33.508 60.3598 33.692C60.6318 33.868 60.9438 33.956 61.2958 33.956ZM65.7937 35V29H66.9337V35H65.7937ZM66.3697 27.728C66.1857 27.728 66.0257 27.66 65.8897 27.524C65.7537 27.38 65.6857 27.216 65.6857 27.032C65.6857 26.84 65.7537 26.68 65.8897 26.552C66.0257 26.416 66.1857 26.348 66.3697 26.348C66.5617 26.348 66.7217 26.416 66.8497 26.552C66.9857 26.68 67.0537 26.84 67.0537 27.032C67.0537 27.216 66.9857 27.38 66.8497 27.524C66.7217 27.66 66.5617 27.728 66.3697 27.728ZM68.6045 35V29H69.6725L69.7445 30.104V35H68.6045ZM72.7565 35V31.928H73.8965V35H72.7565ZM72.7565 31.928C72.7565 31.384 72.6925 30.972 72.5645 30.692C72.4445 30.404 72.2725 30.204 72.0485 30.092C71.8325 29.98 71.5805 29.92 71.2925 29.912C70.8045 29.912 70.4245 30.084 70.1525 30.428C69.8805 30.772 69.7445 31.256 69.7445 31.88H69.2525C69.2525 31.248 69.3445 30.708 69.5285 30.26C69.7205 29.804 69.9885 29.456 70.3325 29.216C70.6845 28.976 71.1005 28.856 71.5805 28.856C72.0525 28.856 72.4605 28.952 72.8045 29.144C73.1565 29.336 73.4245 29.636 73.6085 30.044C73.8005 30.444 73.8965 30.972 73.8965 31.628V31.928H72.7565ZM77.9831 35.144C77.3991 35.144 76.8831 35.012 76.4351 34.748C75.9871 34.476 75.6351 34.104 75.3791 33.632C75.1231 33.16 74.9951 32.616 74.9951 32C74.9951 31.384 75.1231 30.84 75.3791 30.368C75.6351 29.896 75.9871 29.528 76.4351 29.264C76.8911 28.992 77.4111 28.856 77.9951 28.856C78.5471 28.856 79.0311 28.996 79.4471 29.276C79.8631 29.548 80.1871 29.94 80.4191 30.452C80.6591 30.956 80.7791 31.552 80.7791 32.24H75.9311L76.1471 32.06C76.1471 32.484 76.2311 32.852 76.3991 33.164C76.5671 33.476 76.7951 33.716 77.0831 33.884C77.3711 34.044 77.6991 34.124 78.0671 34.124C78.4671 34.124 78.7991 34.032 79.0631 33.848C79.3351 33.656 79.5471 33.416 79.6991 33.128L80.6831 33.584C80.5231 33.896 80.3151 34.172 80.0591 34.412C79.8031 34.644 79.4991 34.824 79.1471 34.952C78.8031 35.08 78.4151 35.144 77.9831 35.144ZM76.2191 31.52L75.9911 31.34H79.7831L79.5671 31.52C79.5671 31.168 79.4951 30.868 79.3511 30.62C79.2071 30.364 79.0151 30.172 78.7751 30.044C78.5351 29.908 78.2671 29.84 77.9711 29.84C77.6831 29.84 77.4031 29.908 77.1311 30.044C76.8671 30.172 76.6471 30.36 76.4711 30.608C76.3031 30.856 76.2191 31.16 76.2191 31.52ZM84.5573 35.144C83.9733 35.144 83.4573 35.012 83.0093 34.748C82.5613 34.476 82.2093 34.104 81.9533 33.632C81.6973 33.16 81.5693 32.616 81.5693 32C81.5693 31.384 81.6973 30.84 81.9533 30.368C82.2093 29.896 82.5613 29.528 83.0093 29.264C83.4653 28.992 83.9853 28.856 84.5693 28.856C85.1213 28.856 85.6053 28.996 86.0213 29.276C86.4373 29.548 86.7613 29.94 86.9933 30.452C87.2333 30.956 87.3533 31.552 87.3533 32.24H82.5053L82.7213 32.06C82.7213 32.484 82.8053 32.852 82.9733 33.164C83.1413 33.476 83.3693 33.716 83.6573 33.884C83.9453 34.044 84.2733 34.124 84.6413 34.124C85.0413 34.124 85.3733 34.032 85.6373 33.848C85.9093 33.656 86.1213 33.416 86.2733 33.128L87.2573 33.584C87.0973 33.896 86.8893 34.172 86.6333 34.412C86.3773 34.644 86.0733 34.824 85.7213 34.952C85.3773 35.08 84.9893 35.144 84.5573 35.144ZM82.7933 31.52L82.5653 31.34H86.3573L86.1413 31.52C86.1413 31.168 86.0693 30.868 85.9253 30.62C85.7813 30.364 85.5893 30.172 85.3493 30.044C85.1093 29.908 84.8413 29.84 84.5453 29.84C84.2573 29.84 83.9773 29.908 83.7053 30.044C83.4413 30.172 83.2213 30.36 83.0453 30.608C82.8773 30.856 82.7933 31.16 82.7933 31.52ZM89.1755 31.772C89.1755 31.124 89.2995 30.596 89.5475 30.188C89.7955 29.78 90.1155 29.476 90.5075 29.276C90.8995 29.076 91.3115 28.976 91.7435 28.976V30.056C91.3835 30.056 91.0395 30.112 90.7115 30.224C90.3915 30.328 90.1275 30.504 89.9195 30.752C89.7195 30.992 89.6195 31.32 89.6195 31.736L89.1755 31.772ZM88.4795 35V29H89.6195V35H88.4795Z" fill="white"/>
        </g>
        <defs>
          <filter id="filter0_d_72_88" x="0.496948" y="0.468506" width="28.1208" height="27.4128" filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
            <feFlood floodOpacity="0" result="BackgroundImageFix"/>
            <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
            <feOffset dx="2" dy="2"/>
            <feGaussianBlur stdDeviation="2"/>
            <feComposite in2="hardAlpha" operator="out"/>
            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_72_88"/>
            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_72_88" result="shape"/>
          </filter>
          <filter id="filter1_d_72_88" x="15" y="20" width="85" height="30" filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
            <feFlood floodOpacity="0" result="BackgroundImageFix"/>
            <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
            <feOffset dy="4"/>
            <feGaussianBlur stdDeviation="2"/>
            <feComposite in2="hardAlpha" operator="out"/>
            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/>
            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_72_88"/>
            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_72_88" result="shape"/>
          </filter>
        </defs>
      </svg>
    </div>
  );
};

export default Cursor; 